<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ó–æ–ª–æ—Ç–æ–π –±–æ–Ω—É—Å ¬∑ TMA</title>
    <!-- Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        :root {
            --bg-dark: #0a0c10;
            --surface-dark: #13171d;
            --card-dark: #1c2129;
            --gold-primary: #ffd966;
            --gold-light: #ffe9b6;
            --gold-deep: #e6b422;
            --accent-glow: rgba(255, 215, 0, 0.25);
            --text-light: #f0f2f5;
            --text-dim: #9aa3b8;
            --shadow-3d: 0 10px 0 #b38f40, 0 8px 20px rgba(0,0,0,0.6);
            --shadow-3d-hover: 0 6px 0 #b38f40, 0 12px 28px rgba(255,215,0,0.3);
            --shadow-3d-press: 0 2px 0 #b38f40, 0 5px 12px rgba(0,0,0,0.5);
            --transition-smooth: all 0.2s cubic-bezier(0.2, 0.9, 0.3, 1.1);
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-light);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding: 16px 12px 24px;
            font-weight: 400;
            line-height: 1.4;
        }

        /* –≥–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Äî –º–æ–±–∏–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ */
        .app-container {
            max-width: 420px;
            width: 100%;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* –∫–∞—Ä—Ç–æ—á–∫–∏ —Å –º–∞—Ç–æ–≤—ã–º —Å—Ç–µ–∫–ª–æ–º */
        .glass-card {
            background: rgba(23, 29, 38, 0.8);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 215, 0, 0.12);
            border-radius: 32px;
            padding: 20px 18px;
            box-shadow: 0 20px 40px -12px rgba(0,0,0,0.8), 0 0 0 1px rgba(230, 180, 34, 0.1) inset;
        }

        /* ===== 3D –ö–ù–û–ü–ö–ò ===== */
        .btn-3d {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            background: linear-gradient(145deg, #fedb82, #e6b422);
            color: #0a0c10;
            font-weight: 700;
            font-size: 1.1rem;
            padding: 16px 24px;
            border: none;
            border-radius: 60px;
            width: 100%;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            box-shadow: var(--shadow-3d);
            transform: translateY(0);
            transition: var(--transition-smooth);
            cursor: pointer;
            position: relative;
            will-change: transform, box-shadow;
            border: 1px solid rgba(255,255,220,0.5);
        }

        .btn-3d:active {
            transform: translateY(6px);
            box-shadow: var(--shadow-3d-press);
        }

        .btn-3d:disabled {
            opacity: 0.5;
            filter: grayscale(0.7);
            pointer-events: none;
            transform: translateY(4px);
            box-shadow: 0 6px 0 #7a6230, 0 4px 12px rgba(0,0,0,0.5);
        }

        /* –≤—Ç–æ—Ä–∏—á–Ω–∞—è 3D –∫–Ω–æ–ø–∫–∞ (–º–µ–Ω–µ–µ —è—Ä–∫–∞—è) */
        .btn-3d-secondary {
            background: linear-gradient(145deg, #3a3f4b, #2a2f3a);
            box-shadow: 0 8px 0 #151a22, 0 8px 20px rgba(0,0,0,0.6);
            color: var(--gold-light);
            border: 1px solid rgba(255,215,0,0.2);
            font-size: 1rem;
            padding: 14px 20px;
        }

        .btn-3d-secondary:active {
            transform: translateY(5px);
            box-shadow: 0 3px 0 #151a22, 0 8px 18px rgba(0,0,0,0.7);
        }

        /* –±–∞–ª–∞–Ω—Å –∏ –∑–∞–≥–æ–ª–æ–≤–∫–∏ */
        .balance-hero {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 8px;
        }

        .balance-amount {
            font-size: 3.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, #ffe9ae, #ffd966);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 10px rgba(255,215,0,0.5);
            line-height: 1.1;
        }

        .balance-label {
            color: var(--text-dim);
            font-size: 0.9rem;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        /* —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–ø–æ–¥–ø–∏—Å–∫–∏ / –¥—Ä—É–∑—å—è) */
        .stats-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 15px 0 8px;
        }

        .progress-bar-bg {
            background: #2b313c;
            height: 12px;
            border-radius: 40px;
            overflow: hidden;
            flex: 1;
            margin: 0 12px 0 8px;
        }

        .progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #f5c542, #ffdb8e);
            border-radius: 40px;
            box-shadow: 0 0 12px #f5c542;
            transition: width 0.4s ease;
        }

        .badge-gold {
            background: rgba(230, 180, 34, 0.18);
            border: 1px solid rgba(255,215,0,0.4);
            border-radius: 60px;
            padding: 6px 14px;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--gold-light);
            backdrop-filter: blur(4px);
        }

        /* –∏—Å—Ç–æ—Ä–∏—è (–∏–º–∏—Ç–∞—Ü–∏—è) */
        .history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255,215,0,0.08);
        }

        .history-item:last-child {
            border-bottom: none;
        }

        .tx-positive {
            color: #b5e6a7;
            font-weight: 600;
        }

        .tx-negative {
            color: #ffa6a6;
        }

        /* —ç–∫—Ä–∞–Ω –ø–æ–¥–ø–∏—Å–∫–∏ (overlay conditional) */
        .subscription-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(10, 12, 16, 0.98);
            backdrop-filter: blur(8px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 24px;
            transition: opacity 0.3s ease;
        }

        .sub-content {
            max-width: 360px;
            text-align: center;
        }

        .channel-list {
            background: var(--card-dark);
            border-radius: 24px;
            padding: 16px;
            margin: 24px 0;
            text-align: left;
        }

        .channel-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 0;
            border-bottom: 1px solid #2f3743;
        }

        .channel-item:last-child {
            border-bottom: none;
        }

        .channel-icon {
            width: 36px; height: 36px;
            background: gold;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: black;
            font-weight: 800;
        }

        /* —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è / —Ç–æ—Å—Ç */
        .toast-message {
            background: var(--gold-deep);
            color: #0b0e12;
            font-weight: 600;
            padding: 12px 20px;
            border-radius: 60px;
            box-shadow: 0 10px 30px rgba(255,215,0,0.5);
            position: fixed;
            bottom: 24px;
            left: 16px;
            right: 16px;
            max-width: 360px;
            margin: 0 auto;
            text-align: center;
            z-index: 1200;
            transform: translateY(150%);
            transition: transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: 1px solid #fff2c9;
        }

        .toast-show {
            transform: translateY(0);
        }

        /* —Ä–∞–∑–Ω–æ–µ */
        .ref-link-box {
            background: #222834;
            border-radius: 40px;
            padding: 12px 18px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            border: 1px dashed #b38f40;
            margin: 10px 0;
        }

        .gold-text {
            color: var(--gold-primary);
            font-weight: 600;
        }

        .small-note {
            font-size: 0.8rem;
            color: #6f7a8f;
        }

        .flex-row {
            display: flex;
            gap: 12px;
            align-items: center;
            flex-wrap: wrap;
        }

        h3 {
            font-size: 1.2rem;
            margin-bottom: 12px;
            letter-spacing: -0.2px;
        }
    </style>
</head>
<body>
    <div class="app-container" id="appContainer">
        <!-- –®–ê–ü–ö–ê –° –ë–ê–õ–ê–ù–°–û–ú -->
        <div class="glass-card">
            <div class="balance-hero">
                <span class="balance-label">–¢–≤–æ–π –±–∞–ª–∞–Ω—Å</span>
                <span class="balance-amount" id="balanceDisplay">0 ‚ÇΩ</span>
            </div>
            <div class="flex-row" style="justify-content: space-between; margin-top: 8px;">
                <span class="badge-gold">‚ö° –î–æ—Å—Ç—É–ø–Ω–æ –∫ –≤—ã–≤–æ–¥—É</span>
                <span class="badge-gold" id="referralCountDisplay">üë• 0 –¥—Ä—É–∑–µ–π</span>
            </div>
        </div>

        <!-- –ö–ù–û–ü–ö–ò: –ë–û–ù–£–° –ò –í–´–í–û–î -->
        <div class="flex-row" style="gap: 12px;">
            <button class="btn-3d" id="bonusBtn" style="flex: 2;">üéÅ –ü–æ–ª—É—á–∏—Ç—å –±–æ–Ω—É—Å</button>
            <button class="btn-3d-secondary" id="withdrawBtn" style="flex: 1.2;" disabled>üí∏ –í—ã–≤–µ—Å—Ç–∏</button>
        </div>

        <!-- –†–ï–§–ï–†–ê–õ–¨–ù–´–ô –ü–†–û–ì–†–ï–°–° –ò –°–°–´–õ–ö–ê -->
        <div class="glass-card">
            <div class="stats-row">
                <span style="display: flex; gap: 6px;"><span class="gold-text">üë• –†–µ—Ñ–µ—Ä–∞–ª—ã</span> <span id="referralCountSmall">0</span>/3</span>
                <span class="small-note">–Ω—É–∂–Ω–æ 3 –∞–∫—Ç–∏–≤–Ω—ã—Ö</span>
            </div>
            <div class="stats-row" style="margin-top: 0;">
                <span style="font-size:0.9rem;">–ü—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–≤–æ–¥–∞</span>
                <div class="progress-bar-bg"><div class="progress-fill" id="withdrawProgress" style="width: 0%;"></div></div>
                <span class="gold-text" id="progressPercent">0%</span>
            </div>
            <div class="ref-link-box" id="refLinkBox">
                <span style="color:#b9c2d6;">t.me/yourbot?start=ref_123</span>
                <button id="copyRefBtn" style="background:none; border:none; color: gold; font-size:1.4rem; cursor:pointer;">üìã</button>
            </div>
            <p class="small-note">–ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–≥–∞ ‚Äî –¥—Ä—É–≥ –¥–æ–ª–∂–µ–Ω –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –∏ –ø–æ–ª—É—á–∏—Ç—å –±–æ–Ω—É—Å</p>
        </div>

        <!-- –ò–°–¢–û–†–ò–Ø –ù–ê–ß–ò–°–õ–ï–ù–ò–ô –ò –í–´–í–û–î–û–í -->
        <div class="glass-card">
            <h3>üìã –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</h3>
            <div id="historyContainer">
                <div class="history-item"><span>–ë–æ–Ω—É—Å –∑–∞ —Ä–µ–∫–ª–∞–º—É</span> <span class="tx-positive">+5 ‚ÇΩ</span></div>
                <div class="history-item"><span>–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –±–æ–Ω—É—Å</span> <span class="tx-positive">+3 ‚ÇΩ</span></div>
                <div class="history-item"><span>–ó–∞—è–≤–∫–∞ –Ω–∞ –≤—ã–≤–æ–¥</span> <span class="tx-negative">-50 ‚ÇΩ</span></div>
            </div>
            <div style="margin-top: 14px;">
                <button class="btn-3d-secondary" id="refreshHistoryBtn" style="padding: 10px;">üîÑ –û–±–Ω–æ–≤–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é (–¥–µ–º–æ)</button>
            </div>
        </div>
    </div>

    <!-- –≠–ö–†–ê–ù –ü–û–î–ü–ò–°–ö–ò (–ò–ó–ù–ê–ß–ê–õ–¨–ù–û –í–ò–î–ï–ù) -->
    <div class="subscription-overlay" id="subscriptionOverlay">
        <div class="sub-content">
            <div style="font-size: 3rem; margin-bottom: 8px;">üîí</div>
            <h2 style="color: var(--gold-primary);">–ü–æ–¥–ø–∏—à–∏—Å—å, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å</h2>
            <p style="color: var(--text-dim); margin: 8px 0 20px;">–ù—É–∂–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –Ω–∞—à–∏ –∫–∞–Ω–∞–ª—ã</p>

            <div class="channel-list">
                <div class="channel-item">
                    <div class="channel-icon">üí∞</div>
                    <div style="flex:1;">Gold Bonus Official</div>
                    <span style="color:limegreen;">‚úîÔ∏è</span>
                </div>
                <div class="channel-item">
                    <div class="channel-icon">üì∞</div>
                    <div style="flex:1;">Crypto News Daily</div>
                    <span style="color:limegreen;">‚úîÔ∏è</span>
                </div>
                <div class="channel-item">
                    <div class="channel-icon">üéÆ</div>
                    <div style="flex:1;">Play & Earn</div>
                    <span style="color:#aaa;">‚ö™</span>
                </div>
            </div>
            <!-- 3D –ö–ù–û–ü–ö–ê –ü–û–î–ü–ò–°–ê–¢–¨–°–Ø (–∏–º–∏—Ç–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏) -->
            <button class="btn-3d" id="fakeSubscribeBtn">‚úÖ –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è</button>
            <p class="small-note" style="margin-top: 16px;">–ü–æ—Å–ª–µ –ø–æ–¥–ø–∏—Å–∫–∏ –∫–Ω–æ–ø–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</p>
            <!-- –°–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ –¥–ª—è –¥–µ–º–æ: –º—ã –ø—Ä–æ—Å—Ç–æ —Å–∏–º—É–ª–∏—Ä—É–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É -->
        </div>
    </div>

    <!-- –¢–û–°–¢-–£–í–ï–î–û–ú–õ–ï–ù–ò–ï -->
    <div id="toast" class="toast-message">üéâ –ë–æ–Ω—É—Å –Ω–∞—á–∏—Å–ª–µ–Ω!</div>

    <script>
        (function() {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
            const tg = window.Telegram.WebApp;
            tg.expand(); // —Ä–∞—Å—Ç—è–Ω—É—Ç—å –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
            tg.disableVerticalSwipes(); // –ø—Ä–∏—è—Ç–Ω–µ–µ –¥–ª—è mini app

            // ---------- –°–û–°–¢–û–Ø–ù–ò–ï –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø ----------
            let isSubscribed = false;               // –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ false ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–≤–µ—Ä–ª–µ–π
            let balance = 42;                        // —Å—Ç–∞—Ä—Ç–æ–≤—ã–π –±–∞–ª–∞–Ω—Å (–¥–ª—è –∫—Ä–∞—Å–æ—Ç—ã)
            const referralCount = 2;                  // —Ç–µ–∫—É—â–µ–µ –∫–æ–ª-–≤–æ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ (–¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞)
            const requiredReferrals = 3;              // –Ω—É–∂–Ω–æ –¥–ª—è –≤—ã–≤–æ–¥–∞

            // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
            const overlay = document.getElementById('subscriptionOverlay');
            const subscribeBtn = document.getElementById('fakeSubscribeBtn');
            const balanceSpan = document.getElementById('balanceDisplay');
            const bonusBtn = document.getElementById('bonusBtn');
            const withdrawBtn = document.getElementById('withdrawBtn');
            const progressFill = document.getElementById('withdrawProgress');
            const progressPercent = document.getElementById('progressPercent');
            const referralCountSpan = document.getElementById('referralCountDisplay');
            const referralSmall = document.getElementById('referralCountSmall');
            const historyDiv = document.getElementById('historyContainer');
            const copyBtn = document.getElementById('copyRefBtn');
            const refLinkBox = document.getElementById('refLinkBox');
            const toast = document.getElementById('toast');

            // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI –±–∞–ª–∞–Ω—Å–∞/—Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
            function refreshUI() {
                balanceSpan.innerText = balance + ' ‚ÇΩ';
                // –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–≤–æ–¥–∞: —É—Å–ª–æ–≤–∏–µ (–ø–æ–¥–ø–∏—Å–∫–∞ –∏ referralCount >=3)
                let progress = 0;
                if (isSubscribed) {
                    progress = Math.min(100, (referralCount / requiredReferrals) * 100);
                }
                progressFill.style.width = progress + '%';
                progressPercent.innerText = Math.floor(progress) + '%';

                referralCountSpan.innerText = `üë• ${referralCount} –¥—Ä—É–∑–µ–π`;
                referralSmall.innerText = referralCount;

                // –∞–∫—Ç–∏–≤–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏ –≤—ã–≤–æ–¥–∞: –ø–æ–¥–ø–∏—Å–∫–∞ –ò —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ >=3
                if (isSubscribed && referralCount >= requiredReferrals) {
                    withdrawBtn.disabled = false;
                } else {
                    withdrawBtn.disabled = true;
                }
            }

            // –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ—Å—Ç —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
            function showToast(message, duration = 2000) {
                toast.innerText = message;
                toast.classList.add('toast-show');
                setTimeout(() => {
                    toast.classList.remove('toast-show');
                }, duration);
            }

            // –ò–º–∏—Ç–∞—Ü–∏—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –±–æ–Ω—É—Å–∞ –∑–∞ —Ä–µ–∫–ª–∞–º—É
            function claimBonus() {
                if (!isSubscribed) {
                    showToast('‚ùå –°–Ω–∞—á–∞–ª–∞ –ø–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ –∫–∞–Ω–∞–ª—ã');
                    return;
                }

                // –≠—Ñ—Ñ–µ–∫—Ç –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ 3D –∫–Ω–æ–ø–∫—É —É–∂–µ —á–µ—Ä–µ–∑ CSS active
                // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –±–æ–Ω—É—Å –æ—Ç 1 –¥–æ 100
                const bonusAmount = Math.floor(Math.random() * 100) + 1; // 1-100
                balance += bonusAmount;

                // –ê–Ω–∏–º–∞—Ü–∏—è: –¥–æ–±–∞–≤–∏–º –∫–ª–∞—Å—Å –ø—É–ª—å—Å–∞—Ü–∏–∏ –Ω–∞ –±–∞–ª–∞–Ω—Å
                balanceSpan.style.transform = 'scale(1.1)';
                setTimeout(() => balanceSpan.style.transform = 'scale(1)', 150);

                // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å
                refreshUI();

                // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é (–≤ —Å–∞–º–æ–µ –Ω–∞—á–∞–ª–æ)
                const newEntry = document.createElement('div');
                newEntry.className = 'history-item';
                newEntry.innerHTML = `<span>–ë–æ–Ω—É—Å –∑–∞ —Ä–µ–∫–ª–∞–º—É</span> <span class="tx-positive">+${bonusAmount} ‚ÇΩ</span>`;
                historyDiv.prepend(newEntry);

                // –£–¥–∞–ª—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç –µ—Å–ª–∏ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ (–±–æ–ª—å—à–µ 5)
                if (historyDiv.children.length > 5) {
                    historyDiv.removeChild(historyDiv.lastElementChild);
                }

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ—Å—Ç
                showToast(`‚ú® +${bonusAmount} ‚ÇΩ –ø–æ–ª—É—á–µ–Ω–æ!`);

                // –ó–î–ï–°–¨ –ë–≠–ö–ï–ù–î: –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä –æ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–∏ –±–æ–Ω—É—Å–∞, –æ–±–Ω–æ–≤–∏—Ç—å –±–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                // –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥ –ø–æ–∫–∞–∑–∞ —Ä–µ–∫–ª–∞–º—ã: tg.showPopup / –∏–ª–∏ –æ—Ç–∫—Ä—ã—Ç—å —Ä–µ–∫–ª–∞–º–Ω—É—é —Å—Å—ã–ª–∫—É
                tg.HapticFeedback.impactOccurred('medium'); // –≤–∏–±—Ä–∞—Ü–∏—è (telegram)
            }

            // –ò–º–∏—Ç–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏ (–∫–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è)
            function handleFakeSubscribe() {
                // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—Ä–æ—Å –∫ –±—ç–∫–µ–Ω–¥—É –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ–¥–ø–∏—Å–æ–∫.
                // –î–ª—è –¥–µ–º–æ –ø—Ä–æ—Å—Ç–æ —Å–∫—Ä—ã–≤–∞–µ–º –æ–≤–µ—Ä–ª–µ–π –∏ —Å—Ç–∞–≤–∏–º isSubscribed = true
                isSubscribed = true;
                overlay.style.display = 'none'; // —Å–∫—Ä—ã—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é
                refreshUI();
                showToast('‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∞!');
                tg.HapticFeedback.notificationOccurred('success');

                // –ó–¥–µ—Å—å backend: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É —á–µ—Ä–µ–∑ –±–æ—Ç–∞, –ø–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∏ –æ–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.
            }

            // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏
            function copyRefLink() {
                const linkText = refLinkBox.innerText.trim(); 
                navigator.clipboard.writeText(linkText).then(() => {
                    showToast('üìé –°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞');
                }).catch(() => {
                    showToast('‚ùå –û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è');
                });
            }

            // –í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ (–∏–º–∏—Ç–∞—Ü–∏—è)
            function handleWithdraw() {
                if (!isSubscribed || referralCount < requiredReferrals) {
                    showToast('‚ùå –£—Å–ª–æ–≤–∏—è –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã');
                    return;
                }
                if (balance <= 0) {
                    showToast('ü™ô –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤');
                    return;
                }

                // –°—É–º–º–∞ –≤—ã–≤–æ–¥–∞ (–º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –º–∏–Ω–∏–º—É–º 50)
                const withdrawAmount = Math.min(balance, 50); // –¥–ª—è –¥–µ–º–∫–∏ –ø—É—Å—Ç—å 50
                if (withdrawAmount < 10) {
                    showToast('üí° –ú–∏–Ω–∏–º—É–º 10 ‚ÇΩ –¥–ª—è –≤—ã–≤–æ–¥–∞');
                    return;
                }

                balance -= withdrawAmount;
                refreshUI();

                // –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é
                const newEntry = document.createElement('div');
                newEntry.className = 'history-item';
                newEntry.innerHTML = `<span>–í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤</span> <span class="tx-negative">-${withdrawAmount} ‚ÇΩ</span>`;
                historyDiv.prepend(newEntry);
                if (historyDiv.children.length > 5) historyDiv.removeChild(historyDiv.lastElementChild);

                showToast(`üí∏ –í—ã–≤–æ–¥ ${withdrawAmount} ‚ÇΩ –æ–±—Ä–∞–±–æ—Ç–∞–Ω (–¥–µ–º–æ)`);
                tg.HapticFeedback.impactOccurred('heavy');
                // –ó–¥–µ—Å—å backend: —Å–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –≤—ã–≤–æ–¥, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ –∏ —Ç.–¥.
            }

            // –î–µ–º–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ (–∏–º–∏—Ç–∞—Ü–∏—è)
            function refreshHistoryDemo() {
                const demoEntries = [
                    { desc: '–†–µ—Ñ. –±–æ–Ω—É—Å –∑–∞ –¥—Ä—É–≥–∞', val: '+15 ‚ÇΩ', pos: true },
                    { desc: '–í—ã–≤–æ–¥ –Ω–∞ –∫–∞—Ä—Ç—É', val: '-30 ‚ÇΩ', pos: false },
                    { desc: '–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å', val: '+7 ‚ÇΩ', pos: true },
                ];
                for (let entry of demoEntries) {
                    const newEntry = document.createElement('div');
                    newEntry.className = 'history-item';
                    newEntry.innerHTML = `<span>${entry.desc}</span> <span class="${entry.pos ? 'tx-positive' : 'tx-negative'}">${entry.val}</span>`;
                    historyDiv.prepend(newEntry);
                }
                while (historyDiv.children.length > 5) {
                    historyDiv.removeChild(historyDiv.lastElementChild);
                }
                showToast('üìú –ò—Å—Ç–æ—Ä–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞');
            }

            // –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –æ–≤–µ—Ä–ª–µ–π –ø–æ–¥–ø–∏—Å–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç isSubscribed (–ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ)
            if (!isSubscribed) {
                overlay.style.display = 'flex';
            } else {
                overlay.style.display = 'none';
            }

            // –ü—Ä–∏–≤—è–∑–∫–∞ —Å–æ–±—ã—Ç–∏–π
            subscribeBtn.addEventListener('click', handleFakeSubscribe);
            bonusBtn.addEventListener('click', claimBonus);
            withdrawBtn.addEventListener('click', handleWithdraw);
            copyBtn.addEventListener('click', copyRefLink);
            document.getElementById('refreshHistoryBtn').addEventListener('click', refreshHistoryDemo);

            // –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —É—Å—Ç–∞–Ω–æ–≤–∏–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π UI
            refreshUI();

            // –î–µ–ª–∞–µ–º –≤–∏–¥, —á—Ç–æ overlay –º–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –ø–æ–¥–ø–∏—Å–∫–∏,
            // –Ω–æ –¥–ª—è —Ä–µ–∞–ª–∏–∑–º–∞ –º–æ–∂–Ω–æ —Ç–∞–∫–∂–µ —á–µ—Ä–µ–∑ –±—ç–∫–µ–Ω–¥ –ø—Ä–æ–≤–µ—Ä–∫—É –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ:
            // –ó–¥–µ—Å—å –º–µ—Å—Ç–æ –¥–ª—è –≤—ã–∑–æ–≤–∞ backend: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∞–ª—å–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏ —á–µ—Ä–µ–∑ Telegram API.
            // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –ø–æ–¥–ø–∏—Å–∞–Ω ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å isSubscribed = true –∏ —Å–∫—Ä—ã—Ç—å –æ–≤–µ—Ä–ª–µ–π.

            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: –∫—Ä–∞—Å–∏–≤–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –Ω–∞ —Ä–µ—Ñ. –±–æ–∫—Å –¥–ª—è –∫–æ–ø–∏–∏
            refLinkBox.addEventListener('click', copyRefLink);

            // –ò–º–∏—Ç–∞—Ü–∏—è —Ç–æ–≥–æ, —á—Ç–æ overlay –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–∫—Ä—ã—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –µ—Å–ª–∏ —É–∂–µ –ø–æ–¥–ø–∏—Å–∞–Ω (–Ω–æ —É –Ω–∞—Å false)
            // –î–ª—è –¥–µ–º–æ –º–æ–∂–Ω–æ —Ä–∞—Å—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å: —á–µ—Ä–µ–∑ 2 —Å–µ–∫ —Å–∫—Ä—ã—Ç—å overlay (–∫–∞–∫ –±—É–¥—Ç–æ –ø–æ–¥–ø–∏—Å–∫–∞ –µ—Å—Ç—å)
            // –ù–æ –æ—Å—Ç–∞–≤–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–∞–º–æ–º—É –Ω–∞–∂–∞—Ç—å "–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è"

            // –î–ª—è –∫—Ä–∞—Å–æ—Ç—ã, –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á—Ç–æ –Ω—É–∂–Ω–æ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è
            setTimeout(() => {
                if (!isSubscribed) {
                    showToast('üîî –ü–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ –∫–∞–Ω–∞–ª—ã', 2500);
                }
            }, 600);
        })();
    </script>

    <!-- –ø–æ—è—Å–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è backend-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ -->
    <!--
        ========== BACKEND –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø ==========
        1. –ü–æ–¥–ø–∏—Å–∫–∞: –∑–∞–º–µ–Ω–∏—Ç–µ handleFakeSubscribe –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –≤—ã–∑–æ–≤ API –±–æ—Ç–∞
           (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ Telegram –º–µ—Ç–æ–¥ getChatMember –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–∞–Ω–∞–ª–∞).
           –ü–æ—Å–ª–µ —É—Å–ø–µ—Ö–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ isSubscribed = true –∏ —Å–∫—Ä–æ–π—Ç–µ overlay.

        2. –ë–æ–Ω—É—Å –∑–∞ —Ä–µ–∫–ª–∞–º—É: –≤ —Ñ—É–Ω–∫—Ü–∏–∏ claimBonus –≤—ã–∑–æ–≤–∏—Ç–µ –ø–æ–∫–∞–∑ —Ä–µ–∫–ª–∞–º–Ω–æ–≥–æ –æ—Ñ—Ñ–µ—Ä–∞.
           –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å tg.showPopup –∏–ª–∏ –æ—Ç–∫—Ä—ã—Ç—å —Å—Å—ã–ª–∫—É.
           –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä –¥–ª—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –¥–µ–Ω–µ–≥,
           –∑–∞—Ç–µ–º –æ–±–Ω–æ–≤–∏—Ç–µ –±–∞–ª–∞–Ω—Å –∏ –∏—Å—Ç–æ—Ä–∏—é.

        3. –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞: —Å—Å—ã–ª–∫–∞ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã startapp.
           –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –¥—Ä—É–≥–∞ –±–æ—Ç –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏ –∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–æ–Ω—É—Å–∞,
           –∑–∞—Ç–µ–º —É–≤–µ–ª–∏—á–∏—Ç—å —Å—á–µ—Ç—á–∏–∫ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ (referralCount) –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –±–∞–∑–µ.
           –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –∑–∞–≤–∏—Å–∏—Ç –æ—Ç referralCount / requiredReferrals (–Ω–∞–ø—Ä–∏–º–µ—Ä, 3).

        4. –í—ã–≤–æ–¥: –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –∫–æ–≥–¥–∞ isSubscribed && referralCount >= 3.
           –í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ –≤—ã–∑—ã–≤–∞–µ—Ç–µ backend –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤—ã–ø–ª–∞—Ç—ã, —Å–ø–∏—Å–∞–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏ –∏—Å—Ç–æ—Ä–∏–∏.

        5. –ë–∞–ª–∞–Ω—Å –∏ –∏—Å—Ç–æ—Ä–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —á–µ—Ä–µ–∑ Telegram WebApp User data
           –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–º –∑–∞–ø—Ä–æ—Å–æ–º –∫ –≤–∞—à–µ–º—É API.

        –í—Å–µ UI-—ç–ª–µ–º–µ–Ω—Ç—ã (–±–∞–ª–∞–Ω—Å, –ø—Ä–æ–≥—Ä–µ—Å—Å, —Ä–µ—Ñ–µ—Ä–∞–ª—ã) –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ refreshUI().
        –î–ª—è –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –ø–æ–¥ —Å–≤–æ–∏ –∫–∞–Ω–∞–ª—ã –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏—è –≤ channel-list.
    -->
</body>
</html>
