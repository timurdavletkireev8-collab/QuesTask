<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>—Ç–µ–º–Ω—ã–π –±–æ–Ω—É—Å ¬∑ tma</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:opsz,wght@14..32,400;14..32,500;14..32,600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* —Ç—ë–º–Ω–∞—è —Ç–µ–º–∞ ‚Äî –±–∞–∑–æ–≤–∞—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) */
        :root {
            --bg: #0a0c12;
            --surface: #14181f;
            --surface-raised: #1e232c;
            --text-primary: #f0f4fa;
            --text-secondary: #9aa8b9;
            --text-tertiary: #5f6c80;
            --accent: #7c85ff;
            --accent-soft: #2f3545;
            --accent-glow: #8790ff20;
            --bonus: #6c8cff;
            --success: #2bbf7c;
            --success-bg: #1a3a30;
            --warning: #f5b56b;
            --border-dim: #262e3a;
            --border-subtle: #1f2733;
            --shadow-depth: 0 12px 30px -10px #00000080;
            --radius-xl: 28px;
            --radius-lg: 22px;
            --radius-md: 16px;
            --radius-sm: 12px;
            --transition: all 0.2s cubic-bezier(0.22, 1, 0.36, 1);
        }

        /* —Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ (–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ, –Ω–æ –±–∞–∑–æ–≤–∞—è —Ç—ë–º–Ω–∞—è) */
        body.light {
            --bg: #f2f5f9;
            --surface: #ffffff;
            --surface-raised: #f9fcff;
            --text-primary: #121926;
            --text-secondary: #3f4a5c;
            --text-tertiary: #6e7b8c;
            --accent: #4f46e5;
            --accent-soft: #eef2ff;
            --accent-glow: #4f46e510;
            --bonus: #0a7cff;
            --success: #0f8b5e;
            --success-bg: #e0f7ea;
            --border-dim: #dce3ec;
            --border-subtle: #e9eef4;
            --shadow-depth: 0 8px 24px -10px #1e293b30;
        }

        body {
            background-color: var(--bg);
            color: var(--text-primary);
            font-family: 'Inter', -apple-system, system-ui, sans-serif;
            font-weight: 400;
            line-height: 1.4;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            transition: background-color 0.2s, color 0.2s;
            -webkit-font-smoothing: antialiased;
            padding: 0 0 24px 0;
        }

        .app-container {
            width: 100%;
            max-width: 420px;
            background-color: var(--bg);
            padding: 20px 18px 24px;
            display: flex;
            flex-direction: column;
            gap: 18px;
        }

        /* –ø–ª–æ—Å–∫–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å —Ç–æ–Ω–∫–∏–º–∏ –≥—Ä–∞–Ω–∏—Ü–∞–º–∏ */
        .card {
            background-color: var(--surface);
            border-radius: var(--radius-xl);
            padding: 24px 20px;
            border: 1px solid var(--border-subtle);
            transition: var(--transition);
            box-shadow: var(--shadow-depth);
        }

        .card-subtle {
            background-color: var(--surface-raised);
            border-radius: var(--radius-lg);
            padding: 18px 20px;
            border: 1px solid var(--border-dim);
        }

        /* –ø–ª–æ—Å–∫–∏–µ –∫–Ω–æ–ø–∫–∏ */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border: none;
            background-color: var(--accent-soft);
            color: var(--accent);
            font-weight: 600;
            font-size: 1rem;
            padding: 14px 22px;
            border-radius: 60px;
            transition: var(--transition);
            cursor: pointer;
            gap: 8px;
            border: 1px solid transparent;
            letter-spacing: -0.01em;
        }

        .btn-primary {
            background-color: var(--accent);
            color: white;
        }

        .btn-block {
            width: 100%;
            justify-content: center;
        }

        .btn:active {
            transform: scale(0.97);
            opacity: 0.7;
        }

        .btn:disabled {
            opacity: 0.35;
            pointer-events: none;
            filter: grayscale(0.4);
        }

        /* –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π */
        .progress-bar {
            width: 100%;
            height: 6px;
            background-color: var(--border-dim);
            border-radius: 12px;
            overflow: hidden;
            margin: 14px 0 8px;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--accent);
            width: 0%;
            border-radius: 12px;
            transition: width 0.3s ease;
        }

        /* —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞ */
        .flex-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
        }

        .balance-large {
            font-size: 3rem;
            font-weight: 500;
            letter-spacing: -0.03em;
            line-height: 1;
            color: var(--text-primary);
        }

        .badge {
            background-color: var(--accent-soft);
            padding: 4px 14px;
            border-radius: 40px;
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--accent);
        }

        .badge-success {
            background-color: var(--success-bg);
            color: var(--success);
        }

        .badge-dim {
            background-color: var(--border-dim);
            color: var(--text-secondary);
        }

        .hint-text {
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-weight: 400;
        }

        .small-mono {
            font-size: 0.9rem;
            color: var(--text-tertiary);
            font-weight: 450;
        }

        /* –ø–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ —Ü–∏—Ñ—Ä */
        @keyframes gentlePop {
            0% { opacity: 0.3; transform: translateY(5px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        .animate-balance {
            animation: gentlePop 0.25s ease-out forwards;
        }

        /* —ç–∫—Ä–∞–Ω –ø–æ–¥–ø–∏—Å–∫–∏ (–æ–≤–µ—Ä–ª–µ–π) */
        .subscription-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: var(--bg);
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            backdrop-filter: blur(4px);
        }

        .sub-card {
            background: var(--surface);
            border-radius: var(--radius-xl);
            padding: 36px 26px;
            text-align: center;
            max-width: 360px;
            border: 1px solid var(--border-subtle);
            box-shadow: var(--shadow-depth);
        }

        .channel-badge-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
            margin: 24px 0 12px;
        }
        .channel-badge {
            background: var(--accent-soft);
            color: var(--accent);
            padding: 6px 16px;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 500;
            border: 1px solid var(--border-dim);
        }

        hr {
            border: none;
            border-top: 1px solid var(--border-dim);
            margin: 18px 0;
        }

        .hidden {
            display: none !important;
        }

        /* –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã (–º–∏–∫—Ä–æ) */
        .theme-toggle {
            background: var(--surface-raised);
            border: 1px solid var(--border-dim);
            border-radius: 40px;
            padding: 8px 14px;
            font-size: 0.8rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition);
        }
        .theme-toggle:active { opacity: 0.6; }

        /* –∏—Å—Ç–æ—Ä–∏—è –ø–ª–æ—Å–∫–∏–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏ */
        .history-item {
            background-color: var(--surface-raised);
            border-radius: var(--radius-md);
            padding: 12px 16px;
            border: 1px solid var(--border-dim);
            transition: var(--transition);
        }
    </style>
</head>
<body class="dark"> <!-- —Ç—ë–º–Ω–∞—è —Ç–µ–º–∞ –±–∞–∑–æ–≤–æ (dark –∫–ª–∞—Å—Å) -->
    <!-- –≠–ö–†–ê–ù –ü–û–î–ü–ò–°–ö–ò (–≤–∏–¥–µ–Ω –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ) -->
    <div id="subscriptionScreen" class="subscription-overlay">
        <div class="sub-card">
            <span style="font-size: 44px; margin-bottom: 8px; display: block;">üîí</span>
            <h2 style="font-weight: 500; margin-bottom: 10px; color: var(--text-primary);">–Ω—É–∂–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∞</h2>
            <p class="hint-text" style="margin-bottom: 26px;">–æ—Ñ–æ—Ä–º–∏ –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –∫–∞–Ω–∞–ª—ã, —á—Ç–æ–±—ã –≤–æ–π—Ç–∏</p>
            
            <div class="channel-badge-list">
                <span class="channel-badge">@bonus_wave</span>
                <span class="channel-badge">@daily_offers</span>
                <span class="channel-badge">@crypto_pulse</span>
            </div>

            <!-- –ø–ª–æ—Å–∫–∞—è –∫–Ω–æ–ø–∫–∞ "–ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è" (–∏–º–∏—Ç–∞—Ü–∏—è) -->
            <button class="btn btn-primary btn-block" id="fakeSubscribeBtn" style="margin-top: 18px;">
                ‚úÖ —è –ø–æ–¥–ø–∏—Å–∞–ª—Å—è
            </button>
            <p class="hint-text" style="margin-top: 18px; font-size: 0.75rem;">* –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –±—ç–∫–µ–Ω–¥–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è</p>
        </div>
    </div>

    <!-- –û–°–ù–û–í–ù–û–ô –ò–ù–¢–ï–†–§–ï–ô–° (—Å–∫—Ä—ã—Ç –¥–æ –ø–æ–¥–ø–∏—Å–∫–∏) -->
    <div id="mainApp" class="app-container hidden">

        <!-- —à–∞–ø–∫–∞: –±–∞–ª–∞–Ω—Å + –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã -->
        <div class="flex-row">
            <div>
                <span class="badge badge-dim">üí∞ —Ç–≤–æ–π —Å—á—ë—Ç</span>
            </div>
            <button class="theme-toggle" id="themeSwitch">üåû —Å–≤–µ—Ç–ª–∞—è</button>
        </div>

        <!-- –∫–∞—Ä—Ç–æ—á–∫–∞ –±–∞–ª–∞–Ω—Å–∞ (–∫—Ä—É–ø–Ω–æ) -->
        <div class="card" style="padding: 24px 22px;">
            <div class="flex-row" style="margin-bottom: 2px;">
                <span class="balance-large" id="balanceDisplay">0</span>
                <span style="font-size: 1.5rem; color: var(--text-tertiary);">‚ÇΩ</span>
            </div>
            <div class="flex-row hint-text">
                <span>–¥–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –≤—ã–≤–æ–¥–∞</span>
                <span id="minWithdrawHint" class="small-mono">–º–∏–Ω 50 ‚ÇΩ</span>
            </div>
        </div>

        <!-- –∫–Ω–æ–ø–∫–∞ –±–æ–Ω—É—Å–∞ (—Ä–µ–∫–ª–∞–º–∞) ‚Äî –ø–ª–æ—Å–∫–∞—è, —è—Ä–∫–∞—è -->
        <button class="btn btn-block" id="bonusBtn" style="background: var(--bonus); color: white; padding: 18px; font-size: 1.2rem;">
            <span>‚ú®</span> –ø–æ–ª—É—á–∏—Ç—å –±–æ–Ω—É—Å (1‚Äì100 ‚ÇΩ)
        </button>

        <!-- –±–ª–æ–∫ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ –∏ –≤—ã–≤–æ–¥–∞ -->
        <div class="card" style="padding: 24px 20px;">
            <!-- —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å -->
            <div class="flex-row" style="margin-bottom: 14px;">
                <span style="font-weight: 600;">üë• —Ä–µ—Ñ–µ—Ä–∞–ª—ã</span>
                <span class="badge" id="referralCountDisplay">0 / 3</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="referralProgress" style="width: 0%;"></div>
            </div>
            <div class="flex-row hint-text" style="margin-top: 6px;">
                <span>–∞–∫—Ç–∏–≤–Ω—ã–µ –¥—Ä—É–∑—å—è (–ø–æ–¥–ø–∏—Å–∫–∞+–±–æ–Ω—É—Å)</span>
                <span id="referralStatus">–Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</span>
            </div>

            <hr>

            <!-- —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ + –∫–æ–ø–∏—è -->
            <div class="flex-row" style="margin-bottom: 10px;">
                <span style="font-weight: 500;">üîó —Ç–≤–æ—è —Å—Å—ã–ª–∫–∞</span>
                <button class="btn" id="copyRefLink" style="padding: 8px 16px; font-size: 0.8rem;">–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
            </div>
            <div class="card-subtle" style="word-break: break-all; font-size: 0.8rem; color: var(--text-secondary);">
                <span id="refLink">https://t.me/mini_bot?start=ref_uLyX7</span>
            </div>

            <!-- –ø—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–≤–æ–¥–∞ -->
            <div style="margin-top: 24px;">
                <div class="flex-row" style="margin-bottom: 8px;">
                    <span style="font-weight: 600;">üí∏ –≤—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤</span>
                    <span class="badge" id="withdrawStatusBadge">‚õî –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="withdrawProgressFill" style="width: 0%;"></div>
                </div>
                <div class="flex-row hint-text" style="margin-top: 8px;">
                    <span>—Ä–µ—Ñ–µ—Ä–∞–ª—ã: <span id="withdrawProgressText">0/3</span></span>
                    <span>–±–∞–ª–∞–Ω—Å: <span id="balanceConditionIcon">‚ùå</span> ‚â•50‚ÇΩ</span>
                </div>

                <!-- –∫–Ω–æ–ø–∫–∞ –≤—ã–≤–æ–¥–∞ -->
                <button class="btn btn-block" id="withdrawBtn" disabled style="margin-top: 24px;">
                    üì§ –≤—ã–≤–µ—Å—Ç–∏
                </button>
            </div>
        </div>

        <!-- –∏—Å—Ç–æ—Ä–∏—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π (–∞–∫–∫—É—Ä–∞—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏) -->
        <div class="card" style="padding: 20px;">
            <span style="font-weight: 600; margin-bottom: 16px; display: block;">üìã –∏—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</span>
            <div id="historyList" style="display: flex; flex-direction: column; gap: 10px;">
                <!-- –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ JS -->
                <div class="history-item flex-row">
                    <span class="hint-text">‚ûï –±–æ–Ω—É—Å –∑–∞ —Ä–µ–∫–ª–∞–º—É</span>
                    <span style="color: var(--success);">+15 ‚ÇΩ</span>
                </div>
                <div class="history-item flex-row">
                    <span class="hint-text">‚ûï –±–æ–Ω—É—Å</span>
                    <span style="color: var(--success);">+42 ‚ÇΩ</span>
                </div>
            </div>
        </div>
        <!-- –¥–µ–ª–∏–∫–∞—Ç–Ω—ã–π —Ñ—É—Ç–µ—Ä -->
        <div class="flex-row hint-text" style="justify-content: center; margin-top: 4px;">
            <span>minimal app ¬∑ flat ¬∑ dark</span>
        </div>
    </div>

    <script>
        (function() {
            // --- –°–û–°–¢–û–Ø–ù–ò–ï –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø (–∏–º–∏—Ç–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö) ---
            let balance = 34;           // —Å—Ç–∞—Ä—Ç–æ–≤—ã–π –±–∞–ª–∞–Ω—Å (—á—É—Ç—å –º–µ–Ω—å—à–µ 50 –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏)
            let referrals = 1;           // –∫–æ–ª-–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –¥—Ä—É–∑–µ–π
            const requiredReferrals = 3;
            const minWithdraw = 50;

            let history = [
                { type: 'bonus', amount: 15 },
                { type: 'bonus', amount: 42 },
            ];

            // –ø–æ–¥–ø–∏—Å–∫–∞ (–∏–º–∏—Ç–∞—Ü–∏—è)
            let isSubscribed = false;

            // --- DOM —ç–ª–µ–º–µ–Ω—Ç—ã ---
            const subscriptionScreen = document.getElementById('subscriptionScreen');
            const mainApp = document.getElementById('mainApp');
            const subscribeBtn = document.getElementById('fakeSubscribeBtn');
            const balanceSpan = document.getElementById('balanceDisplay');
            const bonusBtn = document.getElementById('bonusBtn');
            const referralCountSpan = document.getElementById('referralCountDisplay');
            const referralProgress = document.getElementById('referralProgress');
            const referralStatus = document.getElementById('referralStatus');
            const withdrawBtn = document.getElementById('withdrawBtn');
            const withdrawStatusBadge = document.getElementById('withdrawStatusBadge');
            const withdrawProgressFill = document.getElementById('withdrawProgressFill');
            const withdrawProgressText = document.getElementById('withdrawProgressText');
            const balanceConditionIcon = document.getElementById('balanceConditionIcon');
            const historyDiv = document.getElementById('historyList');
            const themeSwitch = document.getElementById('themeSwitch');
            const copyRefBtn = document.getElementById('copyRefLink');
            const refLinkSpan = document.getElementById('refLink');

            // --- –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI (—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ) ---
            function refreshUI() {
                // –±–∞–ª–∞–Ω—Å —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
                balanceSpan.textContent = balance;
                balanceSpan.classList.add('animate-balance');
                setTimeout(() => balanceSpan.classList.remove('animate-balance'), 250);

                // —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å
                const referralPercent = (referrals / requiredReferrals) * 100;
                referralProgress.style.width = `${Math.min(referralPercent, 100)}%`;
                referralCountSpan.textContent = `${referrals} / ${requiredReferrals}`;
                referralStatus.textContent = referrals >= requiredReferrals ? '‚úÖ –≥–æ—Ç–æ–≤–æ' : `üë• ${referrals}/${requiredReferrals}`;
                referralStatus.style.color = referrals >= requiredReferrals ? 'var(--success)' : 'var(--text-secondary)';

                // —É—Å–ª–æ–≤–∏—è –≤—ã–≤–æ–¥–∞
                const balanceOk = balance >= minWithdraw;
                const referralsOk = referrals >= requiredReferrals;
                const canWithdraw = balanceOk && referralsOk;

                // –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –≤—ã–≤–æ–¥–∞ (–¥–≤–∞ —É—Å–ª–æ–≤–∏—è: 50% –±–∞–ª–∞–Ω—Å, 50% —Ä–µ—Ñ–µ—Ä–∞–ª—ã)
                let conditionsMet = 0;
                if (balanceOk) conditionsMet++;
                if (referralsOk) conditionsMet++;
                const withdrawPercent = (conditionsMet / 2) * 100;
                withdrawProgressFill.style.width = `${withdrawPercent}%`;
                withdrawProgressText.textContent = `${referrals}/${requiredReferrals}`;
                balanceConditionIcon.textContent = balanceOk ? '‚úÖ' : '‚ùå';

                if (canWithdraw) {
                    withdrawBtn.disabled = false;
                    withdrawBtn.style.background = 'var(--success)';
                    withdrawBtn.style.color = 'white';
                    withdrawStatusBadge.textContent = '‚úÖ –º–æ–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏';
                    withdrawStatusBadge.classList.add('badge-success');
                } else {
                    withdrawBtn.disabled = true;
                    withdrawBtn.style.background = 'var(--accent-soft)';
                    withdrawBtn.style.color = 'var(--text-tertiary)';
                    withdrawStatusBadge.textContent = '‚õî –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω';
                    withdrawStatusBadge.classList.remove('badge-success');
                }

                // –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 4)
                historyDiv.innerHTML = '';
                const lastItems = history.slice(-4).reverse();
                if (lastItems.length === 0) {
                    historyDiv.innerHTML = '<div class="history-item hint-text">–ø—É—Å—Ç–æ</div>';
                } else {
                    lastItems.forEach(item => {
                        const row = document.createElement('div');
                        row.className = 'history-item flex-row';
                        if (item.type === 'bonus') {
                            row.innerHTML = `<span class="hint-text">‚ûï –±–æ–Ω—É—Å –∑–∞ —Ä–µ–∫–ª–∞–º—É</span><span style="color: var(--success);">+${item.amount} ‚ÇΩ</span>`;
                        } else if (item.type === 'withdraw') {
                            row.innerHTML = `<span class="hint-text">üì§ –≤—ã–≤–æ–¥</span><span style="color: var(--text-tertiary);">-${item.amount} ‚ÇΩ</span>`;
                        } else {
                            row.innerHTML = `<span class="hint-text">${item.type}</span><span>${item.amount} ‚ÇΩ</span>`;
                        }
                        historyDiv.appendChild(row);
                    });
                }
            }

            // –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –∏—Å—Ç–æ—Ä–∏–∏
            function addHistory(type, amount) {
                history.push({ type, amount });
                if (history.length > 6) history.shift();
                refreshUI();
            }

            // --- –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–¥–ø–∏—Å–∫–∏ ---
            subscribeBtn.addEventListener('click', () => {
                // –∑–¥–µ—Å—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—Ä–æ—Å –∫ –±—ç–∫–µ–Ω–¥—É –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ–¥–ø–∏—Å–æ–∫
                isSubscribed = true;
                subscriptionScreen.classList.add('hidden');
                mainApp.classList.remove('hidden');
                refreshUI();
            });

            // --- –±–æ–Ω—É—Å –∑–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∫–ª–∞–º—ã ---
            bonusBtn.addEventListener('click', () => {
                // –∑–¥–µ—Å—å: –≤—ã–∑–æ–≤ —Ä–µ–∫–ª–∞–º–Ω–æ–≥–æ SDK / –æ—Ñ—Ñ–µ—Ä–∞. –ø–æ—Å–ª–µ —É—Å–ø–µ—Ö–∞:
                const bonus = Math.floor(Math.random() * 100) + 1; // 1-100
                balance += bonus;
                addHistory('bonus', bonus);
            });

            // --- —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (—Ç–µ—Å—Ç: –¥–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –Ω–∞ —Å—á—ë—Ç—á–∏–∫–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç) ---
            referralCountSpan.addEventListener('dblclick', (e) => {
                if (referrals < requiredReferrals) {
                    referrals++;
                    refreshUI();
                }
            });
            // alt+–∫–ª–∏–∫ –Ω–∞ —Å—Ç–∞—Ç—É—Å —Å–±—Ä–æ—Å (–¥–ª—è —Ç–µ—Å—Ç–∞)
            referralStatus.addEventListener('click', (e) => {
                if (e.altKey) {
                    referrals = 0;
                    refreshUI();
                }
            });

            // –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏ (–∏–º–∏—Ç–∞—Ü–∏—è)
            copyRefBtn.addEventListener('click', () => {
                navigator.clipboard.writeText(refLinkSpan.textContent);
                // –∑–¥–µ—Å—å –±—ç–∫–µ–Ω–¥ –º–æ–∂–µ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ—Ö–æ–¥—ã
                alert('‚úÖ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞');
            });

            // --- –≤—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ ---
            withdrawBtn.addEventListener('click', () => {
                if (withdrawBtn.disabled) return;
                if (balance >= minWithdraw && referrals >= requiredReferrals) {
                    const withdrawAmount = balance; // –≤—ã–≤–æ–¥–∏–º –≤—Å—ë
                    balance = 0;
                    addHistory('withdraw', withdrawAmount);
                    refreshUI();
                }
            });

            // --- –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã (—Ç—ë–º–Ω–∞—è –±–∞–∑–æ–≤–∞—è, —Å–≤–µ—Ç–ª–∞—è –∫–∞–∫ –æ–ø—Ü–∏—è) ---
            themeSwitch.addEventListener('click', () => {
                document.body.classList.toggle('light');
                themeSwitch.textContent = document.body.classList.contains('light') ? 'üåô —Ç—ë–º–Ω–∞—è' : 'üåû —Å–≤–µ—Ç–ª–∞—è';
            });

            // —Å—Ç–∞—Ä—Ç–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
            refreshUI();

            // –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∂–Ω–æ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —ç–∫—Ä–∞–Ω –ø–æ–¥–ø–∏—Å–∫–∏:
            // subscriptionScreen.classList.add('hidden');
            // mainApp.classList.remove('hidden');
        })();
    </script>

    <!-- 
        ========== BACKEND-–ò–ù–¢–ï–ì–†–ê–¶–ò–Ø ==========
        ‚Ä¢ –ü–æ–¥–ø–∏—Å–∫–∏: –∑–∞–º–µ–Ω–∏—Ç—å `fakeSubscribeBtn` –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É —á–µ—Ä–µ–∑ Telegram Web App (–∏–ª–∏ –±—ç–∫–µ–Ω–¥).
        ‚Ä¢ –ë–æ–Ω—É—Å: –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–∫–ª–∞–º—ã –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ `https://api.example.com/bonus/claim` 
          –∏ –ø–æ–ª—É—á–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å.
        ‚Ä¢ –†–µ—Ñ–µ—Ä–∞–ª—ã: —É–Ω–∏–∫–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ –¥–æ–ª–∂–Ω–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏. –ü—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –¥—Ä—É–≥–∞ (–ø–æ–¥–ø–∏—Å–∫–∞ + –ø–æ–ª—É—á–µ–Ω–∏–µ –±–æ–Ω—É—Å–∞) 
          —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å —Å—á–µ—Ç—á–∏–∫.
        ‚Ä¢ –í—ã–≤–æ–¥: –ø—Ä–∏ –∫–ª–∏–∫–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –≤—ã–ø–ª–∞—Ç—ã, –±–∞–ª–∞–Ω—Å —Å–ø–∏—Å—ã–≤–∞—Ç—å –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.
        ‚Ä¢ –ò—Å—Ç–æ—Ä–∏—è: –∑–∞–≥—Ä—É–∂–∞—Ç—å —Å —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
        ‚Ä¢ –¢–µ–º–∞: –º–æ–∂–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å Telegram.WebApp.colorScheme.
    -->
</body>
    </html>
